---
openapi: 3.0.3
info:
  title: transaction-capture
  version: 1.1.0-6
tags:
- name: Transaction capture Rest API
paths:
  /TransactionCapture/V1/Transaction/GetList/Request:
    post:
      tags:
      - Transaction capture Rest API
      summary: This method is used to retrieve the transaction data based on the given
        filter criteria.
      operationId: retrieveTransaction
      parameters:
      - name: fi-id
        in: header
        description: Financial Institution Identification
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RetrieveTransactionRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RetrieveTransactionResponse"
        "400":
          description: "Bad Request <br/><br/> <b>Error codes list:</b><br/><ul><li><em>HLXTXCP_TXCP_002\
            \ : Error occurred while retrieving the transaction data, please try again.</em></li></ul>"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "401":
          description: Not Authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "404":
          description: "Not Found <br/><br/> <b>Error codes list:</b><br/><ul><li><em>HLXTXCP_TXCP_002\
            \ : Error occurred while retrieving the transaction data, please try again.</em></li></ul>"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "415":
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "429":
          description: Too Many Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "502":
          description: Bad Gateway
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "503":
          description: Service Unavailable
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "504":
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
  /TransactionCapture/V1/Transaction/Initiate:
    post:
      tags:
      - Transaction capture Rest API
      summary: This method persists the transaction data received from transaction
        clearing request
      operationId: persistTransaction
      parameters:
      - name: fi-id
        in: header
        description: Identification of Financial Institution
        required: true
        schema:
          maxLength: 37
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionInitiationRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  TransactionCaptureId:
                    description: TransactionCaptureId of the Transaction Capture Request.
                    type: string
        "400":
          description: "Bad Request <br/><br/> <b>Error codes list:</b><br/><ul><li><em>HLXTXCP_AD001\
            \ : There is an error while Persisting Transaction,please try again.</em></li></ul>"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "401":
          description: Not Authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "404":
          description: "Not Found <br/><br/> <b>Error codes list:</b><br/><ul><li><em>HLXTXCP_AD001\
            \ : There is an error while Persisting Transaction,please try again.</em></li></ul>"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "415":
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "429":
          description: Too Many Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "502":
          description: Bad Gateway
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "503":
          description: Service Unavailable
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
        "504":
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HelixErrorDetails"
  /TransactionCapture/V1/Transaction/{TransactionCaptureId}/retrieve:
    get:
      tags:
      - Transaction Retrieval Resource
      parameters:
      - name: TransactionCaptureId
        in: path
        required: true
        schema:
          maxLength: 37
          pattern: "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
          type: string
      - name: fi-id
        in: header
        description: Financial Institution Identification
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionRetrievalResponse"
components:
  schemas:
    HelixErrorDetails:
      type: object
      properties:
        messages:
          type: array
          items:
            $ref: "#/components/schemas/HelixMessage"
    HelixMessage:
      type: object
      properties:
        errorCode:
          type: string
        type:
          type: string
        title:
          type: string
        detail:
          type: string
        instance:
          type: string
    LocalDateTime:
      format: date-time
      type: string
      example: "2022-03-10T12:15:50"
    Merchant:
      type: object
      properties:
        Id:
          description: Acceptor ID
          type: string
        Name:
          description: Acceptor Name
          type: string
        Location:
          description: "Address of the merchant location Acceptor Street Address,\
            \ Acceptor Postal Code, Acceptor City Name, Acceptor Country Subdivision,\
            \ Acceptor Address - seperated by a delimiter"
          type: string
        Country:
          description: Acceptor Country
          type: string
        CategoryCode:
          description: Merchant Category Code
          type: string
    PaymentInstrument:
      type: object
      properties:
        FinancialInstitution:
          description: FI to which the Transaction belongs
          type: string
        PaymentInstrumentId:
          description: Payment Instrument ID used to perform the transaction
          type: string
        AgreementId:
          description: Agreement ID to which this Transaction belongs
          type: string
        PartyId:
          description: Associated Party ID to which this Transaction Belongs
          type: string
        Brand:
          description: Brand to which the Transaction belongs
          type: string
        Product:
          description: Product to which the Transaction belongs
          type: string
    Position:
      type: object
      properties:
        Type:
          description: Position Type impacted by this Transaction
          type: string
        Component:
          description: Position Component impacted by this Transaction
          type: string
    RetrieveTransactionRequest:
      type: object
      properties:
        agreementId:
          description: agreement Id
          type: string
        paymentInstrumentId:
          description: payment Instrument Id
          type: string
        minAmount:
          description: minimum Amount
          type: string
        maxAmount:
          description: maximum amount
          type: string
        stCreationDate:
          description: Start Date and Time.
          pattern: "^((?:[1-9]\\d{3}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1\\d|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[1-9]\\\
            d(?:0[48]|[2468][048]|[13579][26])|(?:[2468][048]|[13579][26])00)-02-29)T(?:[01]\\\
            d|2[0-3]):[0-5]\\d:[0-5]\\d(?:.\\d{0,3}\\b)?)?$"
          type: string
        endCreationDate:
          description: End Date and Time.
          pattern: "^((?:[1-9]\\d{3}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1\\d|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[1-9]\\\
            d(?:0[48]|[2468][048]|[13579][26])|(?:[2468][048]|[13579][26])00)-02-29)T(?:[01]\\\
            d|2[0-3]):[0-5]\\d:[0-5]\\d(?:.\\d{0,3}\\b)?)?$"
          type: string
        transactionType:
          description: transaction Type
          type: string
        pageStartIndex:
          format: int32
          description: page Start Index
          type: integer
        pageLimit:
          format: int32
          description: page Limit
          type: integer
    RetrieveTransactionResponse:
      type: object
      properties:
        data:
          description: transaction details
          type: array
          items:
            $ref: "#/components/schemas/TransactionRetrievalResponse"
    Terminal:
      type: object
      properties:
        Id:
          description: Terminal Id
          type: string
        TypeCode:
          description: Terminal Type Code
          type: string
        CapabilityCode:
          description: Terminal Card Data Input
          type: string
    TransactionAmount:
      type: object
      properties:
        value:
          type: number
        currency:
          type: string
        TypeOfAmountCode:
          description: Type Of Amount Code
          type: string
    TransactionInitiationRequest:
      type: object
      properties:
        Id:
          description: Unique Id to identify transaction in TransactionCapture
          type: string
          allOf:
          - $ref: "#/components/schemas/UUID"
        CreationDate:
          description: Date when Transaction was Created
          type: string
          allOf:
          - $ref: "#/components/schemas/LocalDateTime"
        EffectiveDate:
          description: Date when Transaction was Created
          type: string
          allOf:
          - $ref: "#/components/schemas/LocalDateTime"
        TransactionCode:
          description: Transaction Code assigned/provided for the transaction
          type: string
        Status:
          description: Status of the Transaction Record
          type: string
        NetworkReferenceId:
          description: Network Reference ID - Network Reference ID captured in Authorisation
            Domain during Authorisation Process which is passed by Scheme. Mandatory
            for all pending transactions ( transactions approved but not settled)
            Banknet Reference Number
          type: string
        AuthorisationReferenceId:
          description: Authorisation Reference ID - Reference ID captured in Authorisation
            Domain during Authorisation Process. Mandatory for all pending transactions
            ( transactions approved but not settled) System Trace Audit Number (STAN)
          type: string
        CardClearingReferenceId:
          description: CardClearing ID - Reference ID captured in Card Clearing Domain
            during Card Clearing process Retrieval Reference Number
          type: string
        SettlementStatusCode:
          description: Provides the status of settlement of an instruction
          type: string
        ClearingMatchStatusCode:
          description: Provides the status of Clearing Match
          type: string
        BillingStatusCode:
          description: Provides the status of Billing of an instruction
          type: string
        TransactionTypeCode:
          description: "Specifies the type, or nature, of the payment"
          type: string
        PaymentFunctionCode:
          description: Identifies the message function
          type: string
        ApprovalCode:
          description: Approval Code
          type: string
        CardPresentIndicator:
          description: "Point of Service Context, Card Present"
          type: boolean
        CardholderPresentIndicator:
          description: "Point of Service Context, Cardholder Present"
          type: boolean
        EcommerceIndicator:
          description: Ecommerce Indicator
          type: boolean
        MotoInd:
          description: Mail or Telephone Order
          type: boolean
        Terminal:
          description: Terminal
          type: object
          allOf:
          - $ref: "#/components/schemas/Terminal"
        CardDataInput:
          description: Terminal Card Data Input Method Code
          type: string
        TransactionInitiatorType:
          description: Transaction Initiator Type
          type: string
        SettlementDateMMDD:
          description: Authorization Network Reporting Date
          type: string
        Merchant:
          description: Merchant
          type: object
          allOf:
          - $ref: "#/components/schemas/Merchant"
        PaymentInstrument:
          description: Payment Instrument ID used to perform the transaction
          type: object
          allOf:
          - $ref: "#/components/schemas/PaymentInstrument"
        TransactionAmount:
          description: Transaction Amount
          type: array
          items:
            $ref: "#/components/schemas/TransactionAmount"
        Position:
          description: Position impacted by this Transaction
          type: object
          allOf:
          - $ref: "#/components/schemas/Position"
    TransactionInitiationResponse:
      type: object
      properties:
        TransactionCaptureId:
          description: TransactionCaptureId of the Transaction Capture Request.
          type: string
    TransactionRetrievalAmount:
      type: object
      properties:
        id:
          format: int64
          description: id
          type: integer
        amount:
          description: Transaction Amount
          type: number
        currency:
          description: currency
          type: string
        typeOfAmountCode:
          description: Identification or qualification of the type of amount.
          type: string
    TransactionRetrievalResponse:
      type: object
      properties:
        transactionId:
          description: Unique Id to identify transaction in TransactionCapture
          type: string
          allOf:
          - $ref: "#/components/schemas/UUID"
        financialInstitution:
          description: FI to which the Transaction belongs
          type: string
        brand:
          description: Brand to which the Transaction belongs
          type: string
        product:
          description: Product to which the Transaction belongs
          type: string
        agreementId:
          description: Agreement ID to which this Transaction belongs
          type: string
        paymentInstrumentId:
          description: Payment Instrument ID used to perform the transaction
          type: string
        partyId:
          description: Associated Party ID to which this Transaction Belongs
          type: string
        status:
          description: Status of the Transaction Record
          type: string
        creationDateTime:
          description: Date when Transaction was Created
          type: string
          allOf:
          - $ref: "#/components/schemas/LocalDateTime"
        effectiveDate:
          description: Date when Transaction was Created
          type: string
          allOf:
          - $ref: "#/components/schemas/LocalDateTime"
        transactionCode:
          description: Transaction Code assigned/provided for the transaction
          type: string
        positionType:
          description: Position Type impacted by this Transaction
          type: string
        positionComponent:
          description: Position Component impacted by this Transaction
          type: string
        networkReferenceId:
          description: Network Reference ID - Network Reference ID captured in Authorisation
            Domain during Authorisation Process which is passed by Scheme. Mandatory
            for all pending transactions ( transactions approved but not settled)
            Bank network Reference Number - DE 63.2 for MC Transaction Identifier
            - DE 62.2 for Visa
          type: string
        authorisationReferenceId:
          description: Authorisation Reference ID - Reference ID captured in Authorisation
            Domain during Authorisation Process. Mandatory for all pending transactions
            ( transactions approved but not settled) System Trace Audit Number (STAN)
            DE 11
          type: string
        cardClearingReferenceId:
          description: CardClearing ID - Reference ID captured in Card Clearing Domain
            during Card Clearing process Retrieval Reference Number - DE 37.
          type: string
        settlementStatusCode:
          description: Provides the status of settlement of an instruction.
          type: string
        clearingMatchStatusCode:
          description: Provides the status of Clearing Match.
          type: string
        billingStatusCode:
          description: Provides the status of Billing of an instruction.
          type: string
        transactionTypeCode:
          description: "Specifies the type, or nature, of the payment."
          type: string
        paymentFunctionCode:
          description: Identifies the message function
          type: string
        merchantId:
          description: AcceptorID DE 42
          type: string
        merchantName:
          description: Acceptor Name - DE 43.1
          type: string
        merchantLocation:
          description: "Address of the merchant location Acceptor Street Address,\
            \ Acceptor Postal Code, Acceptor City Name, Acceptor Country Subdivision,\
            \ Acceptor Address - separated by a delimiter"
          type: string
        merchantCountry:
          description: Acceptor Country DE 43.6
          type: string
        merchantCategoryCode:
          format: int32
          description: classifies the type of business applicable to the card acceptor.
          type: integer
        terminalId:
          description: Terminal ID DE 41
          type: string
        terminalTypeCode:
          description: Terminal Type Code PDS 0023
          type: string
        terminalCapabilityCode:
          description: Terminal Card Data Input
          type: string
        approvalCode:
          description: authorization code assigned by institutions indicating that
            the auth is approved
          type: string
        cardPresentIndicator:
          description: "Point of Service Context, Card Present"
          type: boolean
        cardholderPresentIndicator:
          description: "Point of Service Context, Cardholder Present"
          type: boolean
        ecommerceIndicator:
          description: Ecommerce Indicator
          type: boolean
        motoInd:
          description: Mail or Telephone Order
          type: boolean
        cardDataInput:
          description: Terminal Card Data Input Method Code
          type: string
        transactionInitiatorType:
          description: Transaction Initiator Type
          type: string
        amounts:
          description: amount details
          type: array
          items:
            $ref: "#/components/schemas/TransactionRetrievalAmount"
    UUID:
      format: uuid
      pattern: "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"
      type: string
